{"version":3,"file":"src_views_BillingQuote_jsx.js","mappings":"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","sources":["webpack://orb-services/./src/error/ErrorComponent.jsx","webpack://orb-services/./src/loading/LoadingComponent.jsx","webpack://orb-services/./src/views/BillingQuote.jsx","webpack://orb-services/./src/views/components/StatusBar.jsx"],"sourcesContent":["function ErrorComponent(props) {\n  const { error } = props;\n\n  return (\n    <main className='error'>\n      <div className=\"status-bar card error\">\n        <span>{error}</span>\n      </div>\n    </main>\n  );\n}\n\nexport default ErrorComponent;\n","function LoadingComponent() {\n  return <div>Loading...</div>;\n}\n\nexport default LoadingComponent;","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { getClient } from '../controllers/clientSlice.js';\nimport {\n  cancelQuote,\n  acceptQuote,\n  getStripeQuote,\n  getQuoteByID,\n} from '../controllers/quoteSlice.js';\nimport { saveInvoice } from '../controllers/invoiceSlice.js';\n\nimport LoadingComponent from '../loading/LoadingComponent';\nimport ErrorComponent from '../error/ErrorComponent.jsx';\nimport StatusBar from '../views/components/StatusBar';\n\nfunction QuoteComponent() {\n  const { id } = useParams();\n\n  const [messageType, setMessageType] = useState('info');\n  const [message, setMessage] = useState(\n    'To receive an invoice for the selected services, you must accept the quote above.'\n  );\n  const [stripeInvoiceID, setStripeInvoiceID] = useState('');\n  const [invoiceID, setInvoiceID] = useState('');\n\n  const { user_email, stripe_customer_id } = useSelector(\n    (state) => state.client\n  );\n  const {\n    loading,\n    quoteError,\n    quote_id,\n    stripe_quote_id,\n    status,\n    total,\n    selections,\n  } = useSelector((state) => state.quote);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getClient()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  }, [user_email, dispatch]);\n\n  useEffect(() => {\n    if (id && stripe_customer_id) {\n      dispatch(getQuoteByID(id)).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  }, [id, stripe_customer_id, dispatch]);\n\n  useEffect(() => {\n    if (status === 'canceled') {\n      setMessageType('error');\n      setMessage('This quote has been canceled.');\n    }\n  }, [status]);\n\n  useEffect(() => {\n    if (stripe_quote_id && status) {\n      dispatch(getStripeQuote()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        } else {\n          setStripeInvoiceID(response.payload.invoice.id);\n        }\n      });\n    }\n  }, [stripe_quote_id, status, dispatch]);\n\n  useEffect(() => {\n    if (stripeInvoiceID !== '') {\n      dispatch(saveInvoice(stripeInvoiceID)).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        } else {\n          setInvoiceID(response.payload);\n        }\n      });\n    }\n  }, [stripeInvoiceID, dispatch]);\n\n  const handleCancel = () => {\n    // pop up that gives the option to cancel or add to the selections\n    if (stripe_quote_id && status === 'open') {\n      dispatch(cancelQuote()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  };\n\n  const handleAccept = async () => {\n    if (stripe_quote_id && status === 'open') {\n      dispatch(acceptQuote()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  };\n\n  const handleAccepted = () => {\n    if (invoiceID) {\n      window.location.href = `/billing/invoice/${invoiceID}`;\n    }\n  };\n\n  if (loading) {\n    return <LoadingComponent />;\n  }\n\n  if (quoteError) {\n    return <ErrorComponent error={quoteError} />;\n  }\n\n  return (\n    <>\n      <h2 className=\"title\">QUOTE</h2>\n\n      <div className=\"quote-card card\">\n        <table>\n          <thead>\n            <tr>\n              <th>\n                <h4>Quote</h4>\n              </th>\n            </tr>\n            <tr>\n              <th>\n                <h4 className=\"number-label\">NO.</h4>\n              </th>\n              <th colSpan={4}>\n                <h4 className=\"description-label\">DESCRIPTION</h4>\n              </th>\n              <th>\n                <h4 className=\"total-label\">TOTAL</h4>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {selections &&\n              selections.length > 0 &&\n              selections.map((item) => (\n                <tr id=\"quote_option\">\n                  <td className=\"feature-id\">{item.id}</td>\n                  <td className=\"feature-name\" id=\"feature_name\" colSpan={4}>\n                    {item.description}\n                  </td>\n                  <td className=\"feature-cost  table-number\" id=\"feature_cost\">\n                    <h4>\n                      {new Intl.NumberFormat('us', {\n                        style: 'currency',\n                        currency: 'USD',\n                      }).format(item.cost)}\n                    </h4>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n      </div>\n\n      <StatusBar message={message} messageType={messageType} />\n\n      <div className=\"actions\">\n        {status && status === 'open' ? (\n          <>\n            <button onClick={handleCancel}>\n              <h3>CANCEL</h3>\n            </button>\n\n            <button onClick={handleAccept}>\n              <h3>ACCEPT</h3>\n            </button>\n          </>\n        ) : status === 'accepted' ? (\n          <button onClick={handleAccepted}>\n            <h3>INVOICE</h3>\n          </button>\n        ) : null}\n      </div>\n    </>\n  );\n}\n\nexport default QuoteComponent;\n","function StatusBar(props) {\n  const { message, messageType } = props;\n\n  return (\n    <>\n      {message && (\n        <div className={`status-bar card ${messageType}`}>\n          <span>{message}</span>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default StatusBar;\n"],"names":["ErrorComponent","props","error","createElement","className","LoadingComponent","React","useEffect","useState","useNavigate","useParams","useSelector","useDispatch","getClient","cancelQuote","acceptQuote","getStripeQuote","getQuoteByID","saveInvoice","StatusBar","QuoteComponent","id","messageType","setMessageType","message","setMessage","stripeInvoiceID","setStripeInvoiceID","invoiceID","setInvoiceID","user_email","stripe_customer_id","state","client","loading","quoteError","quote_id","stripe_quote_id","status","total","selections","quote","dispatch","navigate","then","response","undefined","console","payload","invoice","handleCancel","handleAccept","handleAccepted","window","location","href","Fragment","colSpan","length","map","item","description","Intl","NumberFormat","style","currency","format","cost","onClick"],"sourceRoot":""}