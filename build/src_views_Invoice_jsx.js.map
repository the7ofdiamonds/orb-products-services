{"version":3,"file":"src_views_Invoice_jsx.js","mappings":"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","sources":["webpack://orb-services/./src/views/Invoice.jsx"],"sourcesContent":["import { useNavigate, useParams } from 'react-router-dom';\nimport { useEffect } from 'react';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getClient } from '../controllers/clientSlice.js';\nimport { getStripeCustomer } from '../controllers/customerSlice.js';\nimport { getQuote } from '../controllers/quoteSlice.js';\nimport {\n  getStripeInvoice,\n  getInvoice,\n  updateInvoice,\n} from '../controllers/invoiceSlice.js';\nimport {\n  finalizeInvoice,\n  getPaymentIntent,\n} from '../controllers/paymentSlice.js';\n\nfunction InvoiceComponent() {\n  const { id } = useParams();\n\n  const { user_email, first_name, last_name, stripe_customer_id } = useSelector(\n    (state) => state.client\n  );\n  const {\n    company_name,\n    address_line_1,\n    address_line_2,\n    city,\n    state,\n    zipcode,\n    phone,\n  } = useSelector((state) => state.customer);\n  const { selections } = useSelector((state) => state.quote);\n  const {\n    loading,\n    error,\n    status,\n    stripe_invoice_id,\n    due_date,\n    amount_due,\n    subtotal,\n    tax,\n    payment_intent_id,\n    quote_id,\n  } = useSelector((state) => state.invoice);\n  const { event_id } = useSelector((state) => state.schedule);\n  const { client_secret } = useSelector((state) => state.payment);\n\n  const dueDate = new Date(due_date * 1000).toLocaleString();\n  const amountDue = amount_due;\n  const subTotal = subtotal;\n  const Tax = tax;\n  const grandTotal = amount_due;\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getClient());\n    }\n  }, [user_email, dispatch]);\n\n  useEffect(() => {\n    if (stripe_customer_id) {\n      dispatch(getStripeCustomer());\n    }\n  }, [stripe_customer_id, dispatch]);\n\n  useEffect(() => {\n    if (stripe_customer_id) {\n      dispatch(getInvoice(id, stripe_customer_id));\n    }\n  }, [id, stripe_customer_id, dispatch]);\n\n  useEffect(() => {\n    if (stripe_invoice_id) {\n      dispatch(getStripeInvoice(stripe_invoice_id));\n    }\n  }, [stripe_invoice_id, dispatch]);\n\n  useEffect(() => {\n    if (quote_id && stripe_customer_id) {\n      dispatch(getQuote(quote_id));\n    }\n  }, [quote_id, stripe_customer_id, dispatch]);\n\n  useEffect(() => {\n    if (payment_intent_id) {\n      dispatch(getPaymentIntent());\n    }\n  }, [payment_intent_id, dispatch]);\n\n  useEffect(() => {\n    if (status && payment_intent_id && client_secret) {\n      dispatch(updateInvoice());\n    }\n  }, [status, payment_intent_id, client_secret, dispatch]);\n\n  //Event id mast be validated\n  const handleClick = () => {\n    if (status === 'paid') {\n      navigate(`/services/receipt/${id}`);\n    } else if (status === 'open' && event_id && client_secret) {\n      navigate(`/services/payment/${id}`);\n    } else if (status === 'open' && client_secret) {\n      navigate(`/services/schedule/${id}`);\n    } else if (stripe_invoice_id) {\n      dispatch(finalizeInvoice());\n    }\n  };\n\n  if (error) {\n    return (\n      <main className=\"error\">\n        <div className=\"status-bar card\">\n          <span className=\"error\">\n            You have either entered the wrong Invoice ID, or you are not the\n            client to whom this invoice belongs.\n          </span>\n        </div>\n      </main>\n    );\n  }\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <>\n      <h2 className=\"title\">INVOICE</h2>\n      <div className=\"invoice-card card\">\n        <table className=\"invoice-table\" id=\"service_invoice\">\n          <thead className=\"invoice-table-head\" id=\"service-total-header\">\n            <tr>\n              <th className=\"bill-to-label\" colSpan={2}>\n                <h4>BILL TO:</h4>\n              </th>\n              <td className=\"bill-to-name\" colSpan={4}>\n                {first_name} {last_name} O/B/O {company_name}\n              </td>\n            </tr>\n            <tr className=\"bill-to-address\">\n              <td></td>\n              <td></td>\n              <td colSpan={2}>{address_line_1}</td>\n              <td>{address_line_2}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td></td>\n              <td className=\"bill-to-city\">{city}</td>\n              <td className=\"bill-to-state\">{state}</td>\n              <td className=\"bill-to-zipcode\">{zipcode}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td></td>\n              <td className=\"bill-to-phone\">{phone}</td>\n              <td></td>\n              <td></td>\n            </tr>\n            <tr>\n              <td></td>\n              <td></td>\n              <td className=\"bill-to-email\" colSpan={2}>\n                {user_email}\n              </td>\n              <td></td>\n            </tr>\n            <tr className=\"bill-to-due\">\n              <th className=\"bill-to-due-date-label\" colSpan={2}>\n                <h4>DUE DATE</h4>\n              </th>\n              <td className=\"bill-to-due-date\" colSpan={2}>\n                {dueDate ? dueDate : 'N/A'}\n              </td>\n              <th className=\"bill-to-total-due-label\">\n                <h4>TOTAL DUE</h4>\n              </th>\n              <td className=\"bill-to-total-due\">\n                <h4>\n                  {amount_due\n                    ? new Intl.NumberFormat('us', {\n                        style: 'currency',\n                        currency: 'USD',\n                      }).format(amountDue)\n                    : 'N/A'}\n                </h4>\n              </td>\n            </tr>\n            <tr className=\"invoice-labels\">\n              <th>\n                <h4 className=\"number-label\">NO.</h4>\n              </th>\n              <th colSpan={4}>\n                <h4 className=\"description-label\">DESCRIPTION</h4>\n              </th>\n              <th>\n                <h4 className=\"total-label\">TOTAL</h4>\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {selections &&\n              selections.length > 0 &&\n              selections.map((selection) => (\n                <tr id=\"quote_option\">\n                  <td className=\"feature-id\">{selection.id}</td>\n                  <td className=\"feature-name\" id=\"feature_name\" colSpan={4}>\n                    {selection.description}\n                  </td>\n                  <td className=\"feature-cost  table-number\" id=\"feature_cost\">\n                    <h4>\n                      {new Intl.NumberFormat('us', {\n                        style: 'currency',\n                        currency: 'USD',\n                      }).format(selection.cost)}\n                    </h4>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n\n          <tfoot>\n            <tr>\n              <td></td>\n              <td></td>\n              <td></td>\n              <td></td>\n              <th>\n                <h4 className=\"subtotal-label\">SUBTOTAL</h4>\n              </th>\n              <td>\n                <h4 className=\"subtotal table-number\">\n                  {new Intl.NumberFormat('us', {\n                    style: 'currency',\n                    currency: 'USD',\n                  }).format(subTotal)}\n                </h4>\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td></td>\n              <td></td>\n              <td></td>\n              <th>\n                <h4 className=\"tax-label\">TAX</h4>\n              </th>\n              <td>\n                <h4 className=\"tax table-number\">\n                  {new Intl.NumberFormat('us', {\n                    style: 'currency',\n                    currency: 'USD',\n                  }).format(Tax)}\n                </h4>\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td></td>\n              <td></td>\n              <td></td>\n              <th>\n                <h4 className=\"grand-total-label\">GRAND TOTAL</h4>\n              </th>\n              <th>\n                <h4 className=\"grand-total table-number\">\n                  {new Intl.NumberFormat('us', {\n                    style: 'currency',\n                    currency: 'USD',\n                  }).format(grandTotal)}\n                </h4>\n              </th>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n\n      <button onClick={handleClick}>\n        {status === 'paid' ? <h3>RECEIPT</h3> : <h3>SCHEDULE</h3>}\n      </button>\n    </>\n  );\n}\n\nexport default InvoiceComponent;\n"],"names":["useNavigate","useParams","useEffect","useSelector","useDispatch","getClient","getStripeCustomer","getQuote","getStripeInvoice","getInvoice","updateInvoice","finalizeInvoice","getPaymentIntent","InvoiceComponent","id","user_email","first_name","last_name","stripe_customer_id","state","client","company_name","address_line_1","address_line_2","city","zipcode","phone","customer","selections","quote","loading","error","status","stripe_invoice_id","due_date","amount_due","subtotal","tax","payment_intent_id","quote_id","invoice","event_id","schedule","client_secret","payment","dueDate","Date","toLocaleString","amountDue","subTotal","Tax","grandTotal","dispatch","navigate","handleClick","createElement","className","Fragment","colSpan","Intl","NumberFormat","style","currency","format","length","map","selection","description","cost","onClick"],"sourceRoot":""}