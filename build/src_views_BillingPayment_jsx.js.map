{"version":3,"file":"src_views_BillingPayment_jsx.js","mappings":"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","sources":["webpack://orb-services/./src/error/ErrorComponent.jsx","webpack://orb-services/./src/loading/LoadingComponent.jsx","webpack://orb-services/./src/utils/DisplayStatus.js","webpack://orb-services/./src/views/BillingPayment.jsx","webpack://orb-services/./src/views/components/StatusBar.jsx","webpack://orb-services/./src/views/payment/Navigation.jsx"],"sourcesContent":["function ErrorComponent(props) {\n  const { error } = props;\n\n  return (\n    <main className='error'>\n      <div className=\"status-bar card error\">\n        <span>{error}</span>\n      </div>\n    </main>\n  );\n}\n\nexport default ErrorComponent;\n","function LoadingComponent() {\n  return (\n    <div className=\"loading\">\n      <h1>Loading......</h1>\n    </div>\n  );\n}\n\nexport default LoadingComponent;\n","export const displayStatus = (status) => {\n\n  if (status === \"requires_payment_method\") {\n    return 'Choose a payment method'\n  }\n\n  if (status === 'succeeded') {\n    return 'Your transaction was successful. Thank you. ';\n  }\n\n  if (status === 'processing') {\n    return `This transaction is currently processing you may revisit this page at a later time for an update and a confirmation email will be sent.`;\n  }\n\n  if (\n    status === 'requires_confirmation' ||\n    status === 'requires_action' ||\n    status === 'requires_capture'\n  ) {\n  }\n\n  if (status === 'canceled') {\n    return 'This transaction has been canceled';\n  }\n\n  return status;\n};\n\nexport const displayStatusType = (status) => {\n  if (status === 'succeeded') {\n    return 'success';\n  }\n\n  if (\n    status === 'processing' ||\n    status === 'requires_confirmation' ||\n    status === 'requires_action' ||\n    status === 'requires_capture'\n  ) {\n    return 'caution';\n  }\n\n  if (status === 'canceled') {\n    return 'error';\n  }\n\n  return status;\n};\n","import { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PaymentNavigationComponent from './payment/Navigation.jsx';\n\nimport { getClient } from '../controllers/clientSlice.js';\nimport { getStripeCustomer } from '../controllers/customerSlice.js';\nimport {\n  getInvoiceByID,\n  getStripeInvoice,\n} from '../controllers/invoiceSlice.js';\nimport { getPaymentIntent } from '../controllers/paymentSlice.js';\nimport { getPaymentMethod, getReceipt } from '../controllers/receiptSlice.js';\nimport { displayStatus, displayStatusType } from '../utils/DisplayStatus.js';\n\nimport LoadingComponent from '../loading/LoadingComponent';\nimport ErrorComponent from '../error/ErrorComponent.jsx';\nimport StatusBar from '../views/components/StatusBar';\n\nfunction PaymentComponent() {\n  const { id } = useParams();\n\n  const [messageType, setMessageType] = useState('');\n  const [message, setMessage] = useState('');\n\n  const { user_email, stripe_customer_id } = useSelector(\n    (state) => state.client\n  );\n  const { stripe_invoice_id, status, amount_remaining } = useSelector(\n    (state) => state.invoice\n  );\n  const { loading, paymentError, payment_intent } = useSelector(\n    (state) => state.payment\n  );\n  const { receipt_id } = useSelector((state) => state.receipt);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getClient()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        } else {\n          dispatch(getStripeCustomer(response.payload.stripe_customer_id)).then(\n            (response) => {\n              if (response.error !== undefined) {\n                console.error(response.error.message);\n                setMessageType('error');\n                setMessage(response.error.message);\n              } else {\n                dispatch(\n                  getInvoiceByID(id, response.payload.stripe_customer_id)\n                ).then((response) => {\n                  if (response.error !== undefined) {\n                    console.error(response.error.message);\n                    setMessageType('error');\n                    setMessage(response.error.message);\n                  } else {\n                    dispatch(\n                      getStripeInvoice(response.payload.stripe_invoice_id)\n                    ).then((response) => {\n                      if (response.error !== undefined) {\n                        console.error(response.error.message);\n                        setMessageType('error');\n                        setMessage(response.error.message);\n                      } else {\n                        dispatch(\n                          getPaymentIntent(response.payload.payment_intent_id)\n                        ).then((response) => {\n                          if (response.error !== undefined) {\n                            console.error(response.error.message);\n                            setMessageType('error');\n                            setMessage(response.error.message);\n                          }\n                        });\n                      }\n                    });\n                  }\n                });\n              }\n            }\n          );\n        }\n      });\n    }\n  }, [user_email, dispatch]);\n\n  useEffect(() => {\n    if (status === 'open') {\n      setMessage('Choose a payment method');\n    } else if (status === 'paid' && amount_remaining === 0) {\n      setMessage('This invoice has been paid in full.');\n    }\n  }, [status, amount_remaining]);\n\n  useEffect(() => {\n    if (stripe_invoice_id) {\n      dispatch(getReceipt()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  }, [stripe_invoice_id, dispatch]);\n\n  const handleClick = () => {\n    if (receipt_id) {\n      window.location.href = `/billing/receipt/${receipt_id}`;\n    }\n  };\n\n  if (paymentError) {\n    return <ErrorComponent error={paymentError} />;\n  }\n  if (loading) {\n    return <LoadingComponent />;\n  }\n\n  return (\n    <>\n      <h2 className=\"title\">PAYMENT</h2>\n\n      {status === 'open' ? <PaymentNavigationComponent /> : ''}\n\n      <StatusBar message={message} messageType={messageType} />\n\n      {receipt_id && status == 'paid' ? (\n        <button onClick={handleClick}>\n          <h3>RECEIPT</h3>\n        </button>\n      ) : (\n        ''\n      )}\n    </>\n  );\n}\n\nexport default PaymentComponent;\n","function StatusBar(props) {\n  const { message, messageType } = props;\n\n  return (\n    <>\n      {message && (\n        <div className={`status-bar card ${messageType}`}>\n          <span>{message}</span>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default StatusBar;\n","import { NavLink } from 'react-router-dom';\nimport {\n  useNavigate,\n  useParams,\n} from 'react-router-dom';\n\nfunction PaymentNavigationComponent() {\n  const { id } = useParams();\n\n  return (\n    <>      \n      <div className=\"payment-options\">\n        <NavLink to={`/billing/payment/mobile/${id}`}>\n          <button className=\"mobile-btn\" id=\"mobile-btn\">\n            <h3>MOBILE</h3>\n          </button>\n        </NavLink>\n\n        <NavLink to={`/billing/payment/card/${id}`}>\n          <button className=\"debit-credit-btn\" id=\"debit-credit-btn\">\n            <h3>CARD</h3>\n          </button>\n        </NavLink>\n      </div>\n    </>\n  );\n}\n\nexport default PaymentNavigationComponent;\n"],"names":["ErrorComponent","props","error","createElement","className","LoadingComponent","displayStatus","status","displayStatusType","useEffect","useState","useNavigate","useParams","useDispatch","useSelector","PaymentNavigationComponent","getClient","getStripeCustomer","getInvoiceByID","getStripeInvoice","getPaymentIntent","getPaymentMethod","getReceipt","StatusBar","PaymentComponent","id","messageType","setMessageType","message","setMessage","user_email","stripe_customer_id","state","client","stripe_invoice_id","amount_remaining","invoice","loading","paymentError","payment_intent","payment","receipt_id","receipt","dispatch","navigate","then","response","undefined","console","payload","payment_intent_id","handleClick","window","location","href","Fragment","onClick","NavLink","to"],"sourceRoot":""}