{"version":3,"file":"src_views_BillingPayment_jsx.js","mappings":"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","sources":["webpack://orb-services/./src/error/ErrorComponent.jsx","webpack://orb-services/./src/loading/LoadingComponent.jsx","webpack://orb-services/./src/views/BillingPayment.jsx","webpack://orb-services/./src/views/components/StatusBar.jsx","webpack://orb-services/./src/views/payment/Navigation.jsx"],"sourcesContent":["function ErrorComponent(props) {\n  const { error } = props;\n\n  return (\n    <main className='error'>\n      <div className=\"status-bar card error\">\n        <span>{error}</span>\n      </div>\n    </main>\n  );\n}\n\nexport default ErrorComponent;\n","function LoadingComponent() {\n  return (\n    <div className=\"loading\">\n      <h1>Loading......</h1>\n    </div>\n  );\n}\n\nexport default LoadingComponent;\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PaymentNavigationComponent from './payment/Navigation.jsx';\n\nimport { getClient } from '../controllers/clientSlice.js';\nimport { getStripeCustomer } from '../controllers/customerSlice.js';\nimport {\n  getInvoiceByID,\n  getStripeInvoice,\n} from '../controllers/invoiceSlice.js';\nimport { getPaymentIntent } from '../controllers/paymentSlice.js';\nimport { getReceipt } from '../controllers/receiptSlice.js';\n\nimport LoadingComponent from '../loading/LoadingComponent';\nimport ErrorComponent from '../error/ErrorComponent.jsx';\nimport StatusBar from '../views/components/StatusBar';\n\nfunction PaymentComponent() {\n  const { id } = useParams();\n\n  const [messageType, setMessageType] = useState('');\n  const [message, setMessage] = useState('');\n\n  const { user_email } = useSelector((state) => state.client);\n  const { stripe_invoice_id, status, amount_remaining } = useSelector(\n    (state) => state.invoice\n  );\n  const { paymentLoading, paymentError } = useSelector((state) => state.payment);\n  const { receipt_id } = useSelector((state) => state.receipt);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (user_email) {\n      dispatch(getClient()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        } else {\n          dispatch(getStripeCustomer(response.payload.stripe_customer_id)).then(\n            (response) => {\n              if (response.error !== undefined) {\n                console.error(response.error.message);\n                setMessageType('error');\n                setMessage(response.error.message);\n              } else {\n                dispatch(\n                  getInvoiceByID(id, response.payload.stripe_customer_id)\n                ).then((response) => {\n                  if (response.error !== undefined) {\n                    console.error(response.error.message);\n                    setMessageType('error');\n                    setMessage(response.error.message);\n                  } else {\n                    dispatch(\n                      getStripeInvoice(response.payload.stripe_invoice_id)\n                    ).then((response) => {\n                      if (response.error !== undefined) {\n                        console.error(response.error.message);\n                        setMessageType('error');\n                        setMessage(response.error.message);\n                      } else {\n                        dispatch(\n                          getPaymentIntent(response.payload.payment_intent_id)\n                        ).then((response) => {\n                          if (response.error !== undefined) {\n                            console.error(response.error.message);\n                            setMessageType('error');\n                            setMessage(response.error.message);\n                          }\n                        });\n                      }\n                    });\n                  }\n                });\n              }\n            }\n          );\n        }\n      });\n    }\n  }, [user_email, dispatch]);\n\n  useEffect(() => {\n    if (status === 'open') {\n      setMessage('Choose a payment method');\n    } else if (status === 'paid' && amount_remaining === 0) {\n      setMessage('This invoice has been paid in full.');\n    }\n  }, [status, amount_remaining]);\n\n  useEffect(() => {\n    if (stripe_invoice_id) {\n      dispatch(getReceipt()).then((response) => {\n        if (response.error !== undefined) {\n          console.error(response.error.message);\n          setMessageType('error');\n          setMessage(response.error.message);\n        }\n      });\n    }\n  }, [stripe_invoice_id, dispatch]);\n\n  const handleClick = () => {\n    if (receipt_id) {\n      window.location.href = `/billing/receipt/${receipt_id}`;\n    }\n  };\n\n  if (paymentLoading) {\n    return <LoadingComponent />;\n  }\n\n  if (paymentError) {\n    return <ErrorComponent error={paymentError} />;\n  }\n\n  return (\n    <>\n      <h2 className=\"title\">PAYMENT</h2>\n\n      {status === 'open' ? <PaymentNavigationComponent /> : ''}\n\n      <StatusBar message={message} messageType={messageType} />\n\n      {receipt_id && status == 'paid' ? (\n        <button onClick={handleClick}>\n          <h3>RECEIPT</h3>\n        </button>\n      ) : (\n        ''\n      )}\n    </>\n  );\n}\n\nexport default PaymentComponent;\n","function StatusBar(props) {\n  const { message, messageType } = props;\n\n  return (\n    <>\n      {message && (\n        <div className={`status-bar card ${messageType}`}>\n          <span>{message}</span>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default StatusBar;\n","import { NavLink } from 'react-router-dom';\nimport {\n  useNavigate,\n  useParams,\n} from 'react-router-dom';\n\nfunction PaymentNavigationComponent() {\n  const { id } = useParams();\n\n  return (\n    <>      \n      <div className=\"payment-options\">\n        <NavLink to={`/billing/payment/mobile/${id}`}>\n          <button className=\"mobile-btn\" id=\"mobile-btn\">\n            <h3>MOBILE</h3>\n          </button>\n        </NavLink>\n\n        <NavLink to={`/billing/payment/card/${id}`}>\n          <button className=\"debit-credit-btn\" id=\"debit-credit-btn\">\n            <h3>CARD</h3>\n          </button>\n        </NavLink>\n      </div>\n    </>\n  );\n}\n\nexport default PaymentNavigationComponent;\n"],"names":["ErrorComponent","props","error","createElement","className","LoadingComponent","useEffect","useState","useParams","useDispatch","useSelector","PaymentNavigationComponent","getClient","getStripeCustomer","getInvoiceByID","getStripeInvoice","getPaymentIntent","getReceipt","StatusBar","PaymentComponent","id","messageType","setMessageType","message","setMessage","user_email","state","client","stripe_invoice_id","status","amount_remaining","invoice","paymentLoading","paymentError","payment","receipt_id","receipt","dispatch","then","response","undefined","console","payload","stripe_customer_id","payment_intent_id","handleClick","window","location","href","Fragment","onClick","NavLink","useNavigate","to"],"sourceRoot":""}